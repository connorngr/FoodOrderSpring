<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout.html}">
<head>
    <title>Menu Items</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" /> <!-- Include your CSS here -->

</head>
<body>
<section layout:fragment="custom-content">

    <div class="mx-auto max-w-screen-xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8">
        <header>
            <h2 class="text-xl font-bold text-gray-900 sm:text-3xl">Product Collection</h2>

            <p class="mt-4 max-w-md text-gray-500">
                Web đặt đồ ăn
            </p>
        </header>

        <div th:if="${#authorization.expression('hasAuthority(''ADMIN'')')}">
        <a th:href="@{/items/new}" class="btn btn-primary">Create New Menu Item</a>
            </div>
        <form th:action="@{/items/search}" method="get" class="mt-8">
            <div class="flex items-center">
                <select id="menu" name="menuID" class="form-select mr-2 px-4 py-2 border rounded-lg">
                    <option value="">Select Menu</option>
                    <option th:each="menu : ${menus}" th:value="${menu.menuID}" th:text="${menu.name}">Menu Name</option>
                </select>
                <!-- Input field for searching by menu name -->
                <input type="text" name="name" placeholder="Search by item name" class="form-input mr-2 px-4 py-2 border rounded-lg" />
                <button type="submit" class="btn btn-primary px-4 py-2 rounded-lg bg-blue-500 text-white">Search</button>
            </div>
        </form>
        <ul class="mt-8 grid gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 p-0" th:if="${menuItems != null}">
            <li th:each="menuItem : ${menuItems}" class="bg-white p-1 m-0 p-0" style="max-width:350px">
                <a th:href="@{/items/view/{id}(id=${menuItem.menuItemID})}" class="group block overflow-hidden">
                    <img
                            th:src="@{${menuItem.images[0]}}"
                            alt=""
                            class="h-[350px] w-full object-cover transition duration-500 group-hover:scale-105 sm:h-[450px]"
                    />
                </a>
                <div class="relative bg-white pt-3">
                    <h3 class="text-xs text-gray-700 group-hover:underline group-hover:underline-offset-4" th:text="${menuItem.menu.name} + ', ' + ${menuItem.name}">
                        Basic Tee
                    </h3>
                    <p class="mt-2">
                        <span class="sr-only"> Regular Price </span>
                        <span class="tracking-wider text-gray-900" th:text="${menuItem.price} + ' VND'"> £24.00 GBP </span>
                    </p>
                    <div th:if="${#authorization.expression('!hasAuthority(''ADMIN'')')}">
                        <form th:action="@{/cart/add}" method="post">
                            <input type="hidden" th:name="menuItemID" th:value="${menuItem.menuItemID}" />
                            <input type="number" name="quantity" min="1" value="1" class="form-control" />
                            <button type="submit" class="btn btn-primary mt-1">Add to Cart</button>
                        </form>
                    </div>

                    <div th:if="${#authorization.expression('hasAuthority(''ADMIN'')')}">
                        <a th:href="@{/items/update/{id}(id=${menuItem.menuItemID})}" class="btn btn-secondary">Update</a>
                        <a th:href="@{/items/delete/{id}(id=${menuItem.menuItemID})}" class="btn btn-danger" onclick="return confirm('Are you sure?')">Delete</a>
                    </div>
                    </div>
            </li>
        </ul>
        <div th:if="${menuItems == null}">
            <p class="text-gray-500">No items found.</p>
        </div>
    </div>
</section>
</body>
</html>
